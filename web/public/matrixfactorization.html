<!DOCTYPE html>
<html class="gr__getbootstrap_com" lang="en">
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="https://getbootstrap.com/favicon.ico">
        <title>Spotify MQP - Matrix Factorization Graph</title>

        <!-- CSS -->
        <link href="/css/bootstrap.css" rel="stylesheet">
        <link href="/css/starter-template.css" rel="stylesheet">
        <style>#content > #right > .dose > .dosesingle,#content > #center > .dose > .dosesingle{display:none !important;}</style>
    </head>
    <style>
    /*HTML Vertical Lengend*/
    h3 {margin-top: 15px;}
    .data-name {margin: 0 !important;}
    .key-dot {
        display: inline-block;
        height: 10px;
        margin-right: .5em;
        width: 10px;
    }
    .legend {margin-right:20px;}
    .mf { background: #4682B4;}
    .feat_mf { background: #FF0000;}
    </style>
    <body data-gr-c-s-loaded="true">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <a class="navbar-brand" href="#">Spotify Playlist Continuation MQP</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Graphs</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                            <a class="dropdown-item" href="#">Matrix Factorization Precision</a>
                            <a class="dropdown-item" href="#">Graph 2</a>
                            <a class="dropdown-item" href="#">Graph 3</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <main role="main" class="container">
            <div class="starter-template">
                <h1>Matrix Factorization Precision Graph</h1>
                <div class="legend1">
                  <h3>Legend</h3>
                      <div class="legend1"> <p class="data-name"><span class="key-dot mf"></span>Matrix Factorization</p> </div>
                      <div class="legend1"> <p class="data-name"><span class="key-dot feat_mf"></span>Feature Matrix Factorization</p> </div>
                </div>
                <div id="MatrixGraph" align="center"></div>
                <br>

                <script type="text/javascript">
                    d3.select("#MatrixGraph").select("svg").remove();
                    // Set the dimensions of the canvas / MatrixGraph
                    var margin = {top: 50, right: 20, bottom: 40, left: 50};
                    var width = 1000 - margin.left - margin.right;
                    var height = 570 - margin.top - margin.bottom;
                    var x = d3.scaleLinear().range([0, width]).nice();
                    var y = d3.scaleLinear().range([height, 0]).nice();
                    var formatter = d3.format(".1");
                    var xAxis = d3.axisBottom().scale(x);
                    var yAxis = d3.axisLeft().scale(y).tickFormat(formatter);

                    // Adds the svg canvas
                    var svg = d3.select("body").select("#MatrixGraph")
                        .append("svg")
                            .attr("width", width + margin.left + margin.right)
                            .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                    d3.csv("/data/masterSheet.csv", function(data) {
                        // Define the line
                        var valueline = d3.line()
                            .x(function(data) { return x(data.n); })
                            .y(function(data) { console.log(data.ndcg.slice(0, 7)); return y(data.ndcg.slice(0, 7)); });

                        var valueline2 = d3.line()
                            .x(function(data) { return x(data.n); })
                            .y(function(data) { console.log(data.ndcg_feat.slice(0, 7)); return y(data.ndcg_feat.slice(0, 7)); });

                        // console.log(data)
                        var min = Math.min(d3.min(data, function(data) { return data.ndcg; }), d3.min(data, function(data) { return data.ndcg_feat; }));
                        var max = Math.max(d3.max(data, function(data){return data.ndcg; }),d3.max(data, function(data){return data.ndcg_feat;}));
                        var buffer = 0.025;

                        // Scale the range of the data
                        x.domain(d3.extent(data, function(data) { return data.n; }));
                        y.domain([min-buffer, max+buffer]);

                        // Add the X Axis
                        svg.append("g")
                            .attr("transform", "translate(0," + height + ")")
                            .call(d3.axisBottom(x));

                        // Add the X Axis
                        svg.append("g")
                            .attr("class", "axis")
                            .attr("transform", "translate(0," + height + ")")
                            // .style("text-anchor", "middle")
                            // .attr("dx", "-.1em")
                            .call(d3.axisBottom(x)
                                .ticks(25))
                            .append("text")
                            .attr("x", width/2)
                            .attr("y", 35)
                            .attr("dx", "0.71em")
                            .attr("fill", "#000")
                            .attr("text-anchor", "start")
                            .style("font-weight", "bold")
                            .text("K Value");;

                        // Add the Y Axis
                        svg.append("g")
                            .attr("class", "axis")
                            .call(d3.axisLeft(y)
                                .ticks(20))
                            .append("text")
                            .attr("transform", "rotate(-90)")
                            .attr("x", -250)
                            .attr("y", -50)
                            .attr("dy", "0.71em")
                            .attr("fill", "#000")
                            .attr("text-anchor", "start")
                            .style("font-weight", "bold")
                            .text("NDCG Precision");

                        // Add the valueline path.
                        svg.append("path")
                            .data([data])
                            .style("fill", "none")
                            .style("stroke", "steelblue")
                            .style("stroke-width", 3)
                            .attr("class", "line")
                            .attr("d", valueline(data));

                        svg.append("path")
                            .data([data])
                            .style("fill", "none")
                            .style("stroke", "red")
                            .style("stroke-width", 3)
                            .attr("class", "line")
                            .attr("d", valueline2(data));

                          });
                </script>
            </div>
        </main>

        <!-- Bootstrap core JavaScript -->
        <script src="/js/popper.js"></script>
        <script src="/js/bootstrap.js"></script>
    </body>
</html>
